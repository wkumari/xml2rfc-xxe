<?xml version="1.0" encoding="UTF-8"?>
<!-- $Id$ -->
<!DOCTYPE article PUBLIC "-//OASIS//DTD DocBook XML V4.2//EN"
"http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">
<article>
  <title>xml2rfc Plugin</title>

  <articleinfo>
    <author>
      <firstname>Bill</firstname>

      <surname>Fenner</surname>

      <email>fenner@research.att.com</email>
    </author>

    <abstract>
      <para>xml2rfc/rfc2629 support for the XMLMind XML Editor.</para>

      <para>Great thanks are due to Hussein Shafie, who answered many
      inexperienced questions about xxe's css/xml/java support.</para>
    </abstract>

    <pubdate role="rcs">$Date$</pubdate>
  </articleinfo>

  <section>
    <title>Overview</title>

    <para>This xxe plugin attempts to support most of the rfc2629bis DTD, as
    of xml2rfc release 1.32, January, 2007. This documentation is for plugin
    version %%VERSION%%. The plugin requires at least xxe 3.3 (released June
    15, 2006) and has been tested up to 3.5.1 (released December 27,
    2006).</para>

    <para>This plugin can create text or HTML output using xml2rfc, if
    installed; it can also use xmlmind's native XSL support to generate HTML
    (As of 3.5.1, this feature is limited to the Professional Edition). It can
    also convert to txt, HTML, nroff or canonical XML using the
    xml.resource.org web form. Use the menu items <guimenuitem>Convert to HTML
    using XSL</guimenuitem>, <guimenuitem>HTML Preview using
    XSL</guimenuitem>, <guimenuitem>Text Preview using
    xml.resource.org</guimenuitem>, and the <guisubmenu>...using
    xml.resource.org</guisubmenu> Convert submenu if you don't have xml2rfc
    installed.</para>

    <para>The following items are not yet (and may never be) completely
    supported:</para>

    <itemizedlist>
      <listitem>
        <para>texttable. This requires some extra help (probably a custom java
        widget) to style the table for xmlmind. However, starting in 0.7.3,
        the addon labels rows and columns with their numbers, and puts entries
        in the right columns.</para>
      </listitem>

      <listitem>
        <para>&lt;?rfc ?&gt; processing instructions in the document, &lt;?rfc
        include= in particular. (Wish: to be able to handle this like external
        entity references) (Partial &lt;?rfc include= support is described in
        <xref linkend="extref" />). The &lt;?rfc ?&gt; processing instructions
        before the root element are supported by a custom editor.</para>
      </listitem>
    </itemizedlist>

    <para>Planned features:</para>

    <itemizedlist>
      <listitem>
        <para>Make toolbar helpers more useful</para>

        <itemizedlist>
          <listitem>
            <para>Increase/decrease list item level (tab?)</para>
          </listitem>

          <listitem>
            <para>Fix section manager, including a version of &gt;&gt; which
            attaches to previous-sibling's last section descendant</para>
          </listitem>
        </itemizedlist>
      </listitem>

      <listitem>
        <para>Improve &lt;list counter&gt; support</para>
      </listitem>

      <listitem>
        <para>&lt;?rfc ?&gt; PI editor inside the document</para>
      </listitem>
    </itemizedlist>
  </section>

  <section>
    <title>Usage</title>

    <para>For now, you still have to know a fair amount about the xml2rfc
    schema to use this tool.</para>

    <para>Enter and backspace can be used as you might expect a word processor
    to behave when you're editing paragraphs or lists.</para>

    <para>To insert sections, paragraphs, figures, cross-references, etc., use
    the toolbar or the XXE insert pane; you'll commonly use "Insert" and
    "Insert After". Try to learn the keyboard accelerators (command-I, J,
    typing the start of an element name and expanding it with "space" and
    inserting with "enter"; command-E to edit the attributes of the current
    element, etc. See the xxe tutorial, section "Being productive with XXE"
    for more.)</para>

    <para>Lists, paragraphs and sections are inserted after/inside the current
    one depending on the XXE selection; generally a new element is inserted
    after the current one if the current one is selected, or at the easiest
    place inside the current one if the mark is inside the current
    element.</para>

    <para>The &lt;?rfc ?&gt; processing instruction editor at the top of the
    document is <emphasis>not</emphasis> hooked up to xxe's undo facility. It
    is essentially a completely seperate editor embedded inside the document
    in xxe. There's little to do about this, since xxe is a root element
    editor and has no facilities for editing processing instructions in place
    before the root element.</para>

    <section>
      <title>Toolbar</title>

      <para>Most toolbar items that add elements have behavior that depends on
      the currently selected object. In general, if the selected object is an
      element, the item that's added is a sibling to the selected object. If
      the selection is simply text or there is no selection and the cursor is
      in text, the item that's added is added at or as close to the cursor as
      is feasible, generally as a child of the parent item.</para>

      <variablelist>
        <varlistentry>
          <term><inlinemediaobject>
              <imageobject>
                <imagedata fileref="icons/itemizedlist.gif" />
              </imageobject>
            </inlinemediaobject>Add Itemized List</term>

          <listitem>
            <para>Adds an itemized list (<literal>&lt;list
            style="symbols"&gt;</literal>)</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><inlinemediaobject>
              <imageobject>
                <imagedata fileref="icons/orderedlist.gif" />
              </imageobject>
            </inlinemediaobject>Add Ordered List</term>

          <listitem>
            <para>Adds an ordered list (<literal>&lt;list
            style="numbers"&gt;</literal>)</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><inlinemediaobject>
              <imageobject>
                <imagedata fileref="icons/list_menu.gif" />
              </imageobject>
            </inlinemediaobject>Add other list</term>

          <listitem>
            <variablelist>
              <varlistentry>
                <term>empty</term>

                <listitem>
                  <para>Adds an empty list (<literal>&lt;list
                  style="empty"&gt;</literal>)</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>letters</term>

                <listitem>
                  <para>Adds a lettered list (<literal>&lt;list
                  style="letters"&gt;</literal>)</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>hanging text</term>

                <listitem>
                  <para>Adds a list using hanging text (<literal>&lt;list
                  style="hanging"&gt;</literal>)</para>
                </listitem>
              </varlistentry>
            </variablelist>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><inlinemediaobject>
              <imageobject>
                <imagedata fileref="icons/para.gif" />
              </imageobject>
            </inlinemediaobject>Add paragraph or list item</term>

          <listitem>
            <para>Add a paragraph or list item at the current level.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><inlinemediaobject>
              <imageobject>
                <imagedata fileref="icons/section.gif" />
              </imageobject>
            </inlinemediaobject>Add section</term>

          <listitem>
            <para>Add a section - if a section is currently selected, add a
            sibling at the same level; otherwise, add a subsection within the
            current section.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><inlinemediaobject>
              <imageobject>
                <imagedata fileref="icons/decrsectlevel.gif" />
              </imageobject>
            </inlinemediaobject>Decrease section level</term>

          <listitem>
            <para>Decrease the indentation of the explicitly selected section,
            by making it a sibling of its parent. (e.g., turns 3.2.1 into 3.3
            and if there was a 3.3 that becomes 3.4)</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><inlinemediaobject>
              <imageobject>
                <imagedata fileref="icons/incrsectlevel.gif" />
              </imageobject>
            </inlinemediaobject>Increase section level</term>

          <listitem>
            <para>Increases the indentation of the explicitly selected
            section, by creating an empty section inside which to enclose it.
            Note that this never undoes the effect of the decrease
            function.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><inlinemediaobject>
              <imageobject>
                <imagedata fileref="icons/table.gif" />
              </imageobject>
            </inlinemediaobject>Add table</term>

          <listitem>
            <para>Adds a &lt;texttable&gt; and related elements.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><inlinemediaobject>
              <imageobject>
                <imagedata fileref="icons/figure.gif" />
              </imageobject>
            </inlinemediaobject>Add figure</term>

          <listitem>
            <para>Adds a &lt;figure&gt; and related elements.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><inlinemediaobject>
              <imageobject>
                <imagedata fileref="icons/navigate2.gif" />
              </imageobject>
            </inlinemediaobject>Swap xref ends</term>

          <listitem>
            <para>Flips back and forth between an xref and its target. When
            going from the target back to xref, this flips to the first
            reference to that target in the document; see the next two
            commands.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><inlinemediaobject>
              <imageobject>
                <imagedata fileref="icons/navigatePrevious2.gif" />
              </imageobject>
            </inlinemediaobject>Previous xref to same target</term>

          <listitem>
            <para>If there is another xref to the same target earlier in this
            document, go to it.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><inlinemediaobject>
              <imageobject>
                <imagedata fileref="icons/navigateNext2.gif" />
              </imageobject>
            </inlinemediaobject>Next xref to same target</term>

          <listitem>
            <para>If there is another xref to the same target later in this
            document, go to it.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><inlinemediaobject>
              <imageobject>
                <imagedata fileref="icons/emphasis_menu.gif" />
              </imageobject>
            </inlinemediaobject>Convert to emphasis (spanx)</term>

          <listitem>
            <para>Convert the selected text to the selected type of
            emphasis.</para>

            <variablelist>
              <varlistentry>
                <term>emph</term>

                <listitem>
                  <para>Emphasis - usually <emphasis>italic</emphasis> or
                  *emphasized*</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>strong</term>

                <listitem>
                  <para>Strong - usually <emphasis role="bold">bold</emphasis>
                  or 'single-quoted'</para>
                </listitem>
              </varlistentry>

              <varlistentry>
                <term>verb</term>

                <listitem>
                  <para>Verbatim - usually <literal>monospaced</literal> or
                  "quoted"</para>
                </listitem>
              </varlistentry>
            </variablelist>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term><inlinemediaobject>
              <imageobject>
                <imagedata fileref="icons/plain.gif" />
              </imageobject>
            </inlinemediaobject>Convert to plain text</term>

          <listitem>
            <para>Converts the selection to plain text. In general, removes
            any formatting elements around the selection but doesn't lose any
            text. This has the expected results when applied to a
            <literal>&lt;spanx&gt;</literal> and possibly unexpected results
            when applied to a figure, table or list.</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>

    <section>
      <title>Keyboard Shortcuts</title>

      <para>xxe has many built-in useful keyboard shortcuts; you rarely need
      to use the mouse for many uses. The <ulink
      url="http://www.xmlmind.com/xmleditor/_distrib/doc/user/userguide4.html">xxe
      user's guide</ulink> has a great section on productivity with xxe. In
      addition to the general keyboard shortcuts described there, the xml2rfc
      plugin adds the following shortcuts:</para>

      <informaltable>
        <tgroup cols="2">
          <tbody>
            <row>
              <entry>Keyboard Shortcut</entry>

              <entry>Command</entry>
            </row>

            <row>
              <entry>Shift-Enter</entry>

              <entry>Add a new section at the same level (e.g., in section
              2.1, shift-enter will add section 2.2)</entry>
            </row>

            <row>
              <entry>Ctrl-MINUS</entry>

              <entry>Decrease this section's level (e.g., will turn section
              1.1.1 into section 1.2)</entry>
            </row>

            <row>
              <entry>Ctrl-EQUALS</entry>

              <entry>Increase this section's level (e.g., will turn section 2
              into section 1.2.1)</entry>
            </row>

            <row>
              <entry>Ctrl-Enter</entry>

              <entry>Append another of the same element (e.g., list item,
              paragraph, table entry)</entry>
            </row>

            <row>
              <entry>Ctrl-Shift-Enter</entry>

              <entry>Prepend another of the same element (e.g., list item,
              paragraph, table entry)</entry>
            </row>

            <row>
              <entry>F6</entry>

              <entry>Insert &lt;?rfc include=?&gt; Processing
              Instruction</entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>

      <para>As the user's guide describes, enter, backspace, delete are bound
      to perform word processor-like joining and splitting of paragraphs.
      Also, on the Mac, the modifier to use is Command, not Ctrl.</para>
    </section>
  </section>

  <section>
    <title>XML2RFC menu</title>

    <variablelist>
      <varlistentry>
        <term>HTML Preview</term>

        <listitem>
          <para>Uses an externally-installed <literal>xml2html</literal> to
          convert the XML to HTML, then opens up the rendered HTML in a web
          browser.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Text Preview</term>

        <listitem>
          <para>Uses an externally-installed <literal>xml2rfc</literal> to
          convert the XML to text, then opens up a text editor (or an xterm
          running less) on the result.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>HTML Preview using XSL</term>

        <listitem>
          <para>Uses Julian Reschke's xsl transform to convert the XML to
          HTML, then opens up the rendered HTML in a web browser. This
          procedure does not require any external software, so should work on
          any system even without the xml2rfc tool installed. (As of xxe
          3.5.1, this feature is only available in Professional
          Edition.)</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Text Preview using xml.resource.org</term>

        <listitem>
          <para>Use the xml.resource.org online converter to convert the XML
          to text, then opens up a text editor (or an xterm running less) on
          the result.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>HTML Preview using xml.resource.org</term>

        <listitem>
          <para>Use the xml.resource.org online converter to convert the XML
          to HTML, then opens up the rendered HTML in a web browser.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Insert &lt;?rfc include=''?&gt;</term>

        <listitem>
          <para>Inserts an empty &lt;?rffc include=''?&gt; processing
          instruction into the current element at the cursor position, or
          after the current element if it can't accept a processing
          instruction inside. NOTE: because of this automatic behavior,
          double-check using the path at the top of the screen that the
          processing instruction got inserted <emphasis>inside</emphasis> the
          node you wanted it in; it's easy to get it
          <emphasis>after</emphasis> which will confuse the
          conversions.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Edit in...</term>

        <listitem>
          <para>Asks for a selection of an external editor from a popup list,
          saves the current document, runs the external editor, and waits for
          the user to pick "OK" in the dialog box; then reloads the document
          if it's been modified. Intended to facilitate editing of elements
          that xxe can't (in particular the &lt;?rfc ?&gt; elements at the
          top). This menu item is only available when editing a local file,
          and will be grayed out if editing via FTP or DAV.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Check IETF References</term>

        <listitem>
          <para>Checks references from &lt;reference&gt; elements to RFCs and
          Internet-Drafts; makes note of any that are obsoleted, expired,
          updated, etcetera.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Paste as Paragraphs</term>

        <listitem>
          <para>Pastes the system selection into the document as a series of
          paragraphs. Paragraph boundaries are determined by one or more blank
          lines. This is useful when copying text from a non-XML
          source.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Convert Selected Paragraphs to List</term>

        <listitem>
          <para>When one or more paragraphs (&lt;t&gt; elements) are selected,
          convert them to a list.</para>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>Convert</term>

        <listitem>
          <para>See the next section for documentation of this
          sub-menu.</para>
        </listitem>
      </varlistentry>
    </variablelist>

    <section>
      <title>Convert sub-menu</title>

      <variablelist>
        <varlistentry>
          <term>...using xml.resource.org</term>

          <listitem>
            <para>This submenu allows conversion using the xml.resource.org
            web form. Each sub-menu item corresponds to a different output
            formatted supported by the form. It asks for the file to save the
            result in; then uploads the XML in the editor buffer to the web
            form and saves the results from the web form in the result
            file.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Convert to HTML</term>

          <listitem>
            <para>Asks for the file to save the result in; then uses an
            externally-installed <literal>xml2html</literal> to convert the
            XML to HTML.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Convert to Text</term>

          <listitem>
            <para>Asks for the file to save the result in; then uses an
            externally-installed <literal>xml2rfc</literal> to convert the XML
            to text.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Convert to HTML using XSL</term>

          <listitem>
            <para>Asks for the file to save the result in; then uses Julian
            Reschke's XSL transform to convert the XML to HTML.</para>
          </listitem>
        </varlistentry>

        <varlistentry>
          <term>Convert to PDF using XSL</term>

          <listitem>
            <para>NOTE: This procedure requires xxe Professional Edition; the
            FO plugins are not supported in Standard Edition.</para>

            <para>Asks for the file to save the result in; then uses Julian
            Reschke's XSL transform to convert the XML to XML-FO, then uses an
            xxe XML-FO plugin (if installed) to convert the FO to PDF.</para>
          </listitem>
        </varlistentry>
      </variablelist>
    </section>
  </section>

  <section>
    <title>Table Rendering</title>

    <para>The xml2rfc &lt;texttable&gt; attribute is mostly unsupported at
    this time. It will render a table that should look like this:</para>

    <informaltable>
      <tgroup cols="2">
        <tbody>
          <row>
            <entry><emphasis role="bold">Heading One</emphasis></entry>

            <entry><emphasis role="bold">Heading Two</emphasis></entry>
          </row>

          <row>
            <entry>Hello</entry>

            <entry>World</entry>
          </row>

          <row>
            <entry>I am a</entry>

            <entry>table</entry>
          </row>
        </tbody>
      </tgroup>
    </informaltable>

    <para>as follows:</para>

    <literallayout>  c1: Heading One
                    c2: Heading Two
r1c1: Hello
                  r1c2: World
r2c1: I am a
                  r2c2: table</literallayout>

    <para>If there are not enough &lt;c&gt; elements to make up the content of
    the table, a warning will follow the table.</para>

    <para>While this form allows editing and generation of tables, it is not
    intuitive and it may take some creative thinking to see how the layout
    will end up. Far from WYSIWYG. This is definitely an area for
    improvement.</para>

    <para>xxe has native table support, but requires row elements to wrap sets
    of cells; there is no straightforward way at this time to support the
    xml2rfc schema's type of table that just has a series of cells with no row
    elements.</para>
  </section>

  <section>
    <title>Processing Instructions</title>

    <para>Although support for editing and inserting &lt;?rfc include=?&gt;
    processing instructions more easily is planned, support for handling the
    file that is included is not - meaning that, for example, although
    cross-references to a reference in the included file now show as
    "included", the xxe validator will claim that the document doesn't
    validate.</para>

    <para>xxe is by nature a "root element editor", not an XML file editor, so
    the ability to edit processing instructions that occur before the root
    &lt;rfc&gt; element is provided by custom java code. It supports editing
    any &lt;?rfc ...?&gt; PI before the root element; it provides a dropdown
    box for PIs that it knows about but the PI name can be typed in if the
    dropdown box doesn't contain the desired element name. Although PIs with
    multiple pseudo-attributes can not be edited, they will not be damaged.
    For example, &lt;?rfc toc="yes" toccompact="no"?&gt;â€”this will appear in
    the editor the same as &lt;?rfc toc="yes"&gt;.</para>

    <para>In addition, the <guimenuitem>Edit in...</guimenuitem> menu option
    facilitates editing these items in another editor.</para>
  </section>

  <section>
    <title id="extref">Including External References</title>

    <para>There are two commonly-used methods of importing references from the
    reference database maintained at xml.resource.org:</para>

    <itemizedlist>
      <listitem>
        <para><emphasis role="bold">Entity definitions and
        references.</emphasis> This is the form shown under "Including files"
        on the xml.resource.org web page. Definitions are of the
        form<literallayout>&lt;DOCTYPE rfc SYSTEM 'rfc2629.dtd' [
 &lt;!ENTITY rfc2629 PUBLIC '' 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2629.xml'&gt;
]&gt;</literallayout><literal>xxe</literal> understands these references when
        loading the file, and also loads the referenced file read-only; this
        makes the document validate and allows the cross-reference macros to
        notice it. When xxe saves the document, it turns the entity definition
        into the equivalent:<literallayout>&lt;DOCTYPE rfc SYSTEM 'rfc2629.dtd' [
 &lt;!ENTITY rfc2629 SYSTEM 'http://xml.resource.org/public/rfc/bibxml/reference.RFC.2629.xml'&gt;
]&gt;</literallayout>When <literal>xml2rfc</literal> prior to version 1.29
        reads this, it looks for a relative reference - it only handles
        fully-qualified URLs in PUBLIC entity definitions, so it cannot format
        a file that has been edited this way.</para>

        <para>In addition, this creates a dependency on the http reference, so
        offline editing is not possible. <literal>xxe</literal> will not load
        a file with these kinds of entity references if the referenced file is
        not available.</para>
      </listitem>

      <listitem>
        <para><emphasis role="bold">&lt;?rfc include="..."?&gt; processing
        instructions.</emphasis> These are described in the README for
        <literal>xml2rfc</literal>. They only require a single processing
        instruction inserted where the reference belongs, e.g.:<literallayout>&lt;?rfc include="reference.RFC.2629.xml"?&gt;</literallayout>However,
        this does not cause <literal>xxe</literal> to load the reference, so
        it may think that the document is not well-formed (e.g., a
        &lt;references&gt; section with no &lt;reference&gt; elements since
        they're all included). xxe will also refuse to allow you to delete an
        element that makes the document not-well-formed, so you may end up
        with a placehodler &lt;reference&gt; inside a references section that
        you have to delete by editing the .xml file elsewhere. The
        &lt;xref&gt;-checking code does check for the standard naming
        convention, so an xref to "RFC2629" will show as "included" given the
        above processing instruction.</para>

        <para>To insert a processing instruction, use F6 or select the
        <guimenuitem>Insert &lt;?rfc include=''?&gt;</guimenuitem> menu item
        in the <guimenu>XML2RFC</guimenu> menu. This will insert an &lt;?rfc
        include=''?&gt; processing instruction inside or after the
        currently-selected element.</para>

        <para>The XSL transforms will process &lt;?rfc include=''?&gt;
        instructions. They default to using the xml.resource.org site; if you
        have a local mirror you can configure it as follows:</para>

        <orderedlist>
          <listitem>
            <para>Create a file "my_xml2rfc_catalog.xml" in your XXE
            configuration directory (the same place you unzipped the xml2rfc
            plugin, in the addon/ directory)</para>
          </listitem>

          <listitem>
            <para>Add the following two lines:</para>

            <para><literallayout>  &lt;rewriteURI uriStartString="xml2rfc-bibxml:"
              rewritePrefix="(URL to your RFC bibxml mirror)" /&gt;
  &lt;rewriteURI uriStartString="xml2rfc-bibxml3:"
              rewritePrefix="(URL to your I-D bibxml mirror)" /&gt;
</literallayout></para>
          </listitem>
        </orderedlist>

        <para>Future work will hopefully teach xxe about this style of
        inclusion so that it can include the actual referenced file read-only.
        (xxe knows how to do this with entities and xi:include)</para>
      </listitem>
    </itemizedlist>
  </section>

  <section>
    <title>Customization</title>

    <para>There are a variety of customizations that can be accomplished with
    files in the addon/ directory.</para>

    <section>
      <title>Pointing to other data sources</title>

      <para>The xml2rfc plugin looks for various data using made up URI
      prefixes; this allows for easy reconfiguration using XML Catalogs if you
      have, e.g., a local bibliography mirror. To customize these, create a
      file that looks like the following (with the URLs changed, of course) in
      <filename>addon/my_xml2rfc_catalog.xml</filename>.<literallayout>&lt;?xml version="1.0"?&gt;
&lt;catalog xmlns="urn:oasis:names:tc:entity:xmlns:xml:catalog"
         prefer="public"&gt;

  &lt;rewriteURI uriStartString="xml2rfc-bibxml:"
              rewritePrefix="http://xml.resource.org/public/rfc/bibxml/" /&gt;
  &lt;rewriteURI uriStartString="xml2rfc-bibxml3:"
              rewritePrefix="http://xml.resource.org/public/rfc/bibxml3/" /&gt;

  &lt;rewriteURI uriStartString="xml2rfc-rfcindex:"
              rewritePrefix="ftp://ftp.isi.edu/in-notes/" /&gt;
  &lt;rewriteURI uriStartString="xml2rfc-ietfidstatus:"
              rewritePrefix="http://rtg.ietf.org/~fenner/ietf/" /&gt;

&lt;/catalog&gt;
</literallayout></para>
    </section>

    <section>
      <title>Configuring HTTP proxy, web conversion service, custom xsl,
      etc.</title>

      <para>These items go in the user configuration file for xxe, which is
      named <filename>addon/customize.xxe</filename>. If you already have one,
      add the lines inside the &lt;configuration&gt;...&lt;/configuration&gt;
      below; if you don't have one, create it including the
      &lt;configuration&gt; lines.<literallayout>&lt;?xml version='1.0' encoding='ISO-8859-1'?&gt;
&lt;configuration
 xmlns="http://www.xmlmind.com/xmleditor/schema/configuration"&gt;

  &lt;property name="http.proxyHost"&gt;10.0.2.1&lt;/property&gt;
  &lt;property name="http.proxyPort"&gt;3128&lt;/property&gt;
  &lt;property name="xml2rfc.cgi"&gt;http://xml.resource.org/cgi-bin/xml2rfc-dev.cgi&lt;/property&gt;

&lt;/configuration&gt;
</literallayout>Properties that can be set:</para>

      <informaltable>
        <tgroup cols="2">
          <thead>
            <row>
              <entry align="center">Property</entry>

              <entry align="center">Meaning</entry>
            </row>
          </thead>

          <tbody>
            <row>
              <entry>http.proxyHost</entry>

              <entry>Address or name of your HTTP proxy</entry>
            </row>

            <row>
              <entry>http.proxyPort</entry>

              <entry>Port number of your HTTP proxy</entry>
            </row>

            <row>
              <entry>xml2rfc.cgi</entry>

              <entry>URL for the online document converter</entry>
            </row>

            <row>
              <entry>xml2rfc.formatter</entry>

              <entry>Command to execute to convert documents locally</entry>
            </row>

            <row>
              <entry>xml2rfc.library</entry>

              <entry>XML_LIBRARY environment variable to set when using
              xml2rfc.formatter</entry>
            </row>
          </tbody>
        </tgroup>
      </informaltable>
    </section>

    <section>
      <title>Customizing elements to add and other aspects of the
      plugin</title>

      <para>For more info, see the xxe documentation which uses a sample of
      customizing docbook. This is a sample file, which would be installed as
      <filename>addon/myxml2rfc/myxml2rfc.xxe</filename>. It adds a sample
      template, makes the default view always include the document structure
      at the bottom, and includes templates for adding myself as an author and
      a comment attributed to me.</para>

      <literallayout>&lt;?xml version="1.0"?&gt;
&lt;configuration name="xml2rfc"
  xmlns="http://www.xmlmind.com/xmleditor/schema/configuration"
  xmlns:cfg="http://www.xmlmind.com/xmleditor/schema/configuration"&gt;

  &lt;include location="../xml2rfc/xml2rfc.xxe"/&gt;

  &lt;template location="my-starter-document.xml" name="A Great Starter Internet-Draft"/&gt;

  &lt;windowLayout&gt;
    &lt;center css="xml2rfc" /&gt;
    &lt;bottom css="Document structure" size="0.15" /&gt;
  &lt;/windowLayout&gt;

  &lt;elementTemplate name="mine" selectable="true" xmlns=""&gt;
    &lt;author fullname="Bill Fenner" initials="B." surname="Fenner"&gt;
      &lt;organization&gt;AT&amp;amp;T Labs - Research&lt;/organization&gt;
      &lt;address&gt;
        &lt;postal&gt;
          &lt;street&gt;75 Willow Rd&lt;/street&gt;
          &lt;city&gt;Menlo Park&lt;/city&gt;
          &lt;region&gt;CA&lt;/region&gt;
          &lt;code&gt;94025&lt;/code&gt;
          &lt;country&gt;USA&lt;/country&gt;
        &lt;/postal&gt;
        &lt;phone&gt;+1 650 330-7893&lt;/phone&gt;
        &lt;email&gt;fenner@research.att.com&lt;/email&gt;
      &lt;/address&gt;
    &lt;/author&gt;
  &lt;/elementTemplate&gt;

  &lt;elementTemplate name="mine" selectable="true" xmlns=""&gt;
    &lt;cref source="wcf"&gt;...&lt;/cref&gt;
  &lt;/elementTemplate&gt;

&lt;/configuration&gt;
</literallayout>
    </section>
  </section>

  <section>
    <title>Known Limitations</title>

    <itemizedlist>
      <listitem>
        <para>Pasting from the ASCII art editor JavE (at least on MacOS)
        produces a garbled figure. This is fixed in xxe 2.9.</para>
      </listitem>

      <listitem>
        <para>xml2rfc version 1.28 and earlier cannot load &lt;ENTITY SYSTEM
        "http://..."&gt; definitions; xxe will change the &lt;ENTITY PUBLIC ""
        "http://..."&gt; format that xml2rfc understands to the SYSTEM one.
        This is fixed in xml2rfc version 1.29.</para>
      </listitem>
    </itemizedlist>
  </section>

  <section>
    <title>Support</title>

    <para>Support for this plugin is available via the
    xml2rfc-xxe@rtg.ietf.org mailing list. See <ulink
    url="http://rtg.ietf.org/mailman/listinfo/xml2rfc-xxe">http://rtg.ietf.org/mailman/listinfo/xml2rfc-xxe</ulink>
    for more info. The distribution page is <ulink
    url="http://rtg.ietf.org/~fenner/ietf/xml2rfc-xxe/">http://rtg.ietf.org/~fenner/ietf/xml2rfc-xxe/</ulink>
    . A bug/issue list is <ulink
    url="http://rtg.ietf.org/Members/BillFenner/xml2rfc-xxe/">http://rtg.ietf.org/Members/BillFenner/xml2rfc-xxe/</ulink>
    .</para>
  </section>

  <section>
    <?dbhtml filename="ChangeLog.html"?>

    <title>Change Log</title>

    <variablelist>
      <varlistentry>
        <term>0.7.3 - ???</term>

        <listitem>
          <itemizedlist>
            <listitem>
              <para>Update DTD and Entities to those supported in xml2rfc
              1.32</para>
            </listitem>

            <listitem>
              <para>Display the inherited or implicit list style; display the
              list style in red and use a hanging text of "-?-" if it's using
              the xml2rfc inherited style, which this style sheet doesn't
              currently support. (This behavior, however, is probably an
              advancement from displaying it as empty.)</para>
            </listitem>

            <listitem>
              <para>Supports &amp;rfc.number; and &amp;rfc2629.processor;
              entities</para>
            </listitem>

            <listitem>
              <para>More support for images: teach xxe that images need to get
              saved with the document, and support figure src=</para>
            </listitem>

            <listitem>
              <para>Fix the Insert &lt;?rfc include=''&gt; menu item</para>
            </listitem>

            <listitem>
              <para>Switch to Java code to run a locally-installed xml2rfc.
              This allows us to control the executable and the environment, so
              Windows users can point to their xml2rfc installation.</para>
            </listitem>

            <listitem>
              <para>Support the "unpg" output type for conversions</para>
            </listitem>

            <listitem>
              <para>Add combo-box to select list style</para>
            </listitem>

            <listitem>
              <para>Make reference section titles directly editable</para>
            </listitem>

            <listitem>
              <para>Improved texttable rendering by setting the column
              properly</para>
            </listitem>

            <listitem>
              <para>Updated Julian's xslt</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>0.7.2 - February 20, 2006</term>

        <listitem>
          <itemizedlist>
            <listitem>
              <para>Change to .xxe_addon deployment method</para>
            </listitem>

            <listitem>
              <para>Use ${http_proxy} environment variable (commonly used on
              UNIX), if Java's proxy settings aren't set. This may only work
              with a 1.5 runtime, since getenv was deprecated for a while. If
              it doesn't work, it'll log something like</para>

              <para>Not trying to use ${http_proxy} environment variable:
              java.lang.Error: getenv no longer supported, use properties and
              -D instead: http_proxy</para>

              <para>The second half is the exception from the runtime. (And it
              may not work at all, since I don't yet have a 1.5 runtime to
              test it with.)</para>
            </listitem>

            <listitem>
              <para>Updated webform progress indicators to work with xxe-3.0's
              class hierarchy reshuffling. This means that it won't work on
              2.x now.</para>
            </listitem>

            <listitem>
              <para>Added "xml2rfc.cgi" property to specify a different online
              conversion URL. Change with, e.g., <literal>&lt;property
              name="xml2rfc.cgi"&gt;http://xml.resource.org/cgi-bin/xml2rfc-dev.cgi&lt;/property&gt;</literal>
              in a customize.xxe file.</para>
            </listitem>

            <listitem>
              <para>Add summary.css for outline view. Need to decide whether
              split-screen is default or you have to add it.</para>
            </listitem>

            <listitem>
              <para>Update to Julian's 1.229 xslt (2005/10/27)</para>
            </listitem>

            <listitem>
              <para>Add configuration examples to help text.</para>
            </listitem>

            <listitem>
              <para>Support image on artwork (but not figure yet, depending on
              results of query on mailing list). Also support svg here,
              converting to png for html, if the xxe Batik plugin is
              installed.</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>0.7.1 - October 21, 2005</term>

        <listitem>
          <itemizedlist>
            <listitem>
              <para>Delete &lt;load&gt; element from configuration file, in
              order to work with xxe-3.0. This means the plugin now requires a
              minimum xxe version of 2.10.</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>0.7 - September 29, 2005</term>

        <listitem>
          <itemizedlist>
            <listitem>
              <para>Add entity support for the entities known by
              xml2rfc-1.30.</para>
            </listitem>

            <listitem>
              <para>Add GUI editor for &lt;?rfc ?&gt; PIs before the root
              element.</para>
            </listitem>

            <listitem>
              <para>Add "Insert as Paragraphs" menu item</para>
            </listitem>

            <listitem>
              <para>Add "Convert Selected Paragraphs to List" menu item</para>
            </listitem>

            <listitem>
              <para>Display row/column IDs in texttable</para>
            </listitem>

            <listitem>
              <para>Display "Preamble:" and "Postamble:" labels for figure and
              texttable</para>
            </listitem>

            <listitem>
              <para>Warn when using non-3978 IPR that it won't be accepted by
              the IETF</para>
            </listitem>

            <listitem>
              <para>Added shift-Enter binding to insert a new sibling section
              for riw.</para>
            </listitem>

            <listitem>
              <para>Changed to custom code for increasing and decreasing
              section level.</para>
            </listitem>

            <listitem>
              <para>Added command-hyphen and command-equals shortcuts for
              increasing and decreasing section level</para>
            </listitem>

            <listitem>
              <para>Updated to Julian's latest xslt.</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>0.6 - April 5, 2005</term>

        <listitem>
          <itemizedlist>
            <listitem>
              <para>Switch to line-based download in the web-based
              conversions, so that conversion results get the native line
              endings on Windows.</para>
            </listitem>

            <listitem>
              <para>Support &lt;list style="format"&gt; and counter="",
              including the implicit counter=. (Changing from one counter to
              another results in a gap in the other counter's space; deleting
              a list that's in a counter may cause exceptions; these
              limitations to be removed in a future version)</para>
            </listitem>

            <listitem>
              <para>Update DTD to xml2rfc 1.29's, including new IPR</para>
            </listitem>

            <listitem>
              <para>Update sample new document to default to new IPR</para>
            </listitem>

            <listitem>
              <para>Update <guimenuitem>Insert &lt;?rfc include=''?&gt;
              </guimenuitem>menu item to properly insert after the current PI
              if the cursor is in a PI</para>
            </listitem>

            <listitem>
              <para>Add <guimenuitem>Check IETF References</guimenuitem> menu
              item, which checks against RFC and I-D indexes for up to date
              references.</para>
            </listitem>

            <listitem>
              <para>Fix <guimenuitem>Edit In...</guimenuitem> command
              invocations on UNIX and Windows</para>
            </listitem>

            <listitem>
              <para>Made most common element attributes editable inline</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>0.5 - Mar 22, 2005</term>

        <listitem>
          <itemizedlist>
            <listitem>
              <para>Add web-based conversion, in <guisubmenu>...using
              xml.resource.org</guisubmenu> submenu, using
              xml.resource.org</para>
            </listitem>

            <listitem>
              <para>Add web-based converter preview, in <guimenuitem>Text
              Preview using xml.resource.org</guimenuitem> menu item, using
              xml.resource.org</para>
            </listitem>

            <listitem>
              <para>Make comments the same size as surrounding text; having
              them smaller made them hard to edit.</para>
            </listitem>

            <listitem>
              <para>Make vspace blankLines editable inline</para>
            </listitem>

            <listitem>
              <para>Default to one blankLine for vspace</para>
            </listitem>

            <listitem>
              <para>Update vspace rendering to be less visually
              disruptive</para>
            </listitem>

            <listitem>
              <para>Update postal rendering to include labels</para>
            </listitem>

            <listitem>
              <para>Warn about long titles without abbreviations</para>
            </listitem>

            <listitem>
              <para>Update iref rendering</para>
            </listitem>

            <listitem>
              <para>Display artwork attributes (messily, but these are
              rare)</para>
            </listitem>

            <listitem>
              <para>Update Julian's XSL to 1.216</para>
            </listitem>

            <listitem>
              <para>Always save using charset US-ASCII; xml2rfc doesn't
              support UTF-8 but does support certain entities.</para>
            </listitem>

            <listitem>
              <para>Make the mozilla preview work using file:// and the full
              path to the file.</para>
            </listitem>

            <listitem>
              <para>Add <guimenuitem>Edit In...</guimenuitem> menu item to
              edit the active file in a different editor</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>0.4.1 - Feb 16, 2005</term>

        <listitem>
          <itemizedlist>
            <listitem>
              <para>Recompile plugin for xxe 2.9. This version only works with
              2.9.</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>0.4 - Jan 28, 2005</term>

        <listitem>
          <itemizedlist>
            <listitem>
              <para>&lt;artwork&gt; is now always saved as [CDATA[..]] to
              assist external editing and ensure whitespace
              preservation.</para>
            </listitem>

            <listitem>
              <para>The anchor of a &lt;reference&gt; that's not referenced in
              the document turns red.</para>
            </listitem>

            <listitem>
              <para>&lt;?rfc include...?&gt; is now handled when using XSL for
              preview or conversion (thanks to Rob Austein / ISC for the
              script). [to do: document configuring the local directory with a
              catalog]</para>
            </listitem>

            <listitem>
              <para>Changed HTML preview using xml2html to a process just like
              the one using xml2rfc - no longer strips out processing
              instructions.</para>
            </listitem>

            <listitem>
              <para>Updated XSL transforms to Julian's January 27, 2005
              release.</para>
            </listitem>

            <listitem>
              <para>Added F6/menu option to insert an &lt;?rfc include=''?&gt;
              PI</para>
            </listitem>

            <listitem>
              <para>Added command-ENTER and command-shift-ENTER shortcuts to
              insert the same element after (before) the current one.</para>
            </listitem>

            <listitem>
              <para>Duplicate anchors are noted with [DUPLICATE ANCHOR] in
              red.</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>0.3 - Dec 17, 2004</term>

        <listitem>
          <itemizedlist>
            <listitem>
              <para>Switched to file picker, not directory picker, for the
              results of conversions.</para>
            </listitem>

            <listitem>
              <para>Added increase/decrease section level with xxe's
              builtins.</para>
            </listitem>

            <listitem>
              <para>Added link end swaps</para>
            </listitem>

            <listitem>
              <para>PDF renderer via FOP verified to work (using the config
              distributed with 0.2). This requires xxe Professional
              Edition.</para>
            </listitem>

            <listitem>
              <para>Display "included" after an xref that seems to refer to an
              &lt;?rfc include=...?&gt;ed reference. This match triggers if a)
              the target= starts with RFC and the processing instruction
              includes "reference.RFC.N", or b) the target= starts with RFC
              and the processing instruction includes
              "reference.&lt;target&gt;". Boy did that make for a complex
              xpath function.</para>
            </listitem>

            <listitem>
              <para>Display the actual rfc processing instructions that occur
              before the root element.</para>
            </listitem>

            <listitem>
              <para>Display "[not referenced]" next to an anchor that has no
              references (most significant in a references section)</para>
            </listitem>

            <listitem>
              <para>Display the format string (unformatted) in format-style
              lists.</para>
            </listitem>

            <listitem>
              <para>Claim (inside xxe) an XML document with no DOCTYPE and an
              &lt;rfc&gt; root element, and force the rfc2629.dtd on it. Also
              claim &lt;reference&gt;, in case of editing a reference that's
              included via an entity reference.</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>0.2 - Nov 29, 2004</term>

        <listitem>
          <itemizedlist>
            <listitem>
              <para>Fixed section and appendix numbering, make a note when we
              know we can't auto-number properly because the indentation got
              too deep.</para>
            </listitem>

            <listitem>
              <para>Modified comment and figure coloring to match XSL
              transform's HTML output</para>
            </listitem>

            <listitem>
              <para>Support hangIndent in hanging lists</para>
            </listitem>

            <listitem>
              <para>Make hangText editable in the margin in hanging
              lists</para>
            </listitem>

            <listitem>
              <para>Note in the figure handle if the document uses the
              deprecated &lt;t&gt;&lt;figure&gt; construct.</para>
            </listitem>

            <listitem>
              <para>Slightly modify texttable rendering to give the preamble
              and postamble a consistent look. (Still can't render the body of
              the table as a table)</para>
            </listitem>

            <listitem>
              <para>Display "???" as the marker for lists with an invalid
              style</para>
            </listitem>

            <listitem>
              <para>Display warning inside &lt;list&gt; that's not a child of
              &lt;t&gt;</para>
            </listitem>

            <listitem>
              <para>Fixed bugs in draft template; it validates now</para>
            </listitem>

            <listitem>
              <para>Include online help</para>
            </listitem>

            <listitem>
              <para>XSL HTML preview and HTML and (untested) PDF
              conversions</para>
            </listitem>

            <listitem>
              <para>Add template to ensure that added references contain all
              required elements.</para>
            </listitem>
          </itemizedlist>
        </listitem>
      </varlistentry>

      <varlistentry>
        <term>0.1 - Nov 17, 2004</term>

        <listitem>
          <para>First public release</para>
        </listitem>
      </varlistentry>
    </variablelist>
  </section>
</article>